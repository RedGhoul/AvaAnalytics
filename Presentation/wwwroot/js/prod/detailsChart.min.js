$(function(){var a={webSiteId:null,PageViewCountChartNode:null,URLRoutesVisitedChartNode:null,BrowserTypeStatsChartNode:null,SystemStatsChartNode:null,ScreenSizeStatsChartNode:null,LocationOfVisitorsStatsChartNode:null,InteractionStats_NotFoundText:null,BrowserStats_NotFoundText:null,SystemStats_NotFoundText:null,ScreenStats_NotFoundText:null,LocationStats_NotFoundText:null,newGradArr:["#CC2936","#08415C"],Error_Message:"Nothing Found Just Yet",StatsSerachBtn:document.getElementById("StatsSerach"),CurrentStartDate:null,CurrentEndDate:null,baseDateTime:null,Chart_PageViewStats:null,Chart_InteractionStats:null,Chart_BrowserStats:null,Chart_SystemStats:null,Chart_ScreenSizeStats:null,Chart_LocationStats:null,Set_BaseDate:function(){a.CurrentStartDate=moment().subtract(7,"days").format(),a.CurrentEndDate=moment().format(),a.baseDateTime={CurrentStartDate:a.CurrentStartDate,CurrentEndDate:a.CurrentEndDate}},Hid_NotFoundText:function(){a.InteractionStats_NotFoundText.hidden=!0,a.BrowserStats_NotFoundText.hidden=!0,a.SystemStats_NotFoundText.hidden=!0,a.ScreenStats_NotFoundText.hidden=!0,a.LocationStats_NotFoundText.hidden=!0},Display_Error_Message:function(a,b,c){null!==a&&0!==a.length||(b.innerHTML=c,b.hidden=!1),sum=0;for(var d=0;d<a.length;d++)sum+=a[d];0===sum&&(b.innerHTML=c,b.hidden=!1)},GetDeviceType:function(){var a=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(a)?"tablet":/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(a)?"mobile":"desktop"},Refresh_Chart_UI:function(b,c,d,e,f,g,h){axios({method:b,url:c,data:d,headers:a.headers}).then(function(b){var c=b.data;g&&a.Display_Error_Message(c,g,a.Error_Message),e.data=f(c,h),e.update()})},SetUp_Chart_UI:function(){a.Hid_NotFoundText();for(var b="post",c=function(a,b){var c=b(a);return{labels:c.GLabels,datasets:[{borderColor:"rgb(255, 99, 132)",label:"Counts",data:c.GData}],fill:!1}},d=function(b,c){var d=c(b);return{labels:d.GLabels,datasets:[{label:"Counts",backgroundColor:chroma.scale(a.newGradArr).mode("lch").colors(d.GData.length),data:d.GData}]}},e=function(b){var c=[],d=[],e=0;return b.forEach(function(a){a.count>0&&(e++,c.push(moment(a.createdAt).local().format("MMMM Do YYYY, h:mm:ss a")),d.push(a.count))}),e>60&&(a.Chart_PageViewStats.options.scales=a.scaleOptionsBigCountViews),{GLabels:c,GData:d}},f=function(a){var b=["Phones","Large Phones","Tablets","Desktops","Monitors 4K Plus"],c={numberOfPhones:"Phones",largePhonesSmallTablets:"Large Phones",tabletsSmallLaptops:"Tables",computerMonitors:"Desktops",computerMonitors4K:"Monitors 4K Plus"},d=[];for(var e in a[0])for(var f in b)c[e]===b[f]&&d.push(a[0][e]);return{GLabels:b,GData:d}},g=function(a){var b=[],c=[];return a.forEach(function(a){b.push(a.path),c.push(a.total)}),{GLabels:b,GData:c}},h=function(a){var b=[],c=[];return a.forEach(function(a){b.push(a.browser+" "+a.version),c.push(a.count)}),{GLabels:b,GData:c}},i=function(a){var b=[],c=[];return a.forEach(function(a){b.push(a.platform+" "+a.version),c.push(a.count)}),{GLabels:b,GData:c}},j=function(a){var b=[],c=[];return a.forEach(function(a){b.push(a.location),c.push(a.count)}),{GLabels:b,GData:c}},k=[{chart:a.Chart_PageViewStats,data_function:c,chart_url:"/api/Stats/PageViewCountStats/"+a.webSiteId,notFoundText:null,dataMapper:e},{chart:a.Chart_InteractionStats,data_function:d,chart_url:"/api/Stats/InteractionStats/"+a.webSiteId,notFoundText:a.InteractionStats_NotFoundText,dataMapper:g},{chart:a.Chart_BrowserStats,data_function:d,chart_url:"/api/Stats/BrowserStats/"+a.webSiteId,notFoundText:a.BrowserStats_NotFoundText,dataMapper:h},{chart:a.Chart_SystemStats,data_function:d,chart_url:"/api/Stats/SystemStats/"+a.webSiteId,notFoundText:a.SystemStats_NotFoundText,dataMapper:i},{chart:a.Chart_ScreenSizeStats,data_function:d,chart_url:"/api/Stats/ScreenSizeStats/"+a.webSiteId,notFoundText:a.ScreenStats_NotFoundText,dataMapper:f},{chart:a.Chart_LocationStats,data_function:d,chart_url:"/api/Stats/LocationStats/"+a.webSiteId,notFoundText:a.LocationStats_NotFoundText,dataMapper:j}],l={CurrentStartDate:a.CurrentStartDate,CurrentEndDate:a.CurrentEndDate},m=0;m<k.length;m++)a.Refresh_Chart_UI(b,k[m].chart_url,l,k[m].chart,k[m].data_function,k[m].notFoundText,k[m].dataMapper)},SetUp_DateTimePickers:function(){jQuery.datetimepicker.setLocale("en"),$("#date_timepicker_start")[0].value=moment(a.CurrentStartDate).format("MM/DD/YYYY"),$("#date_timepicker_start").datetimepicker({startDate:a.CurrentStartDate,format:"m/d/y",onShow:function(a){this.setOptions({maxDate:!!$("#date_timepicker_end").val()&&jQuery("#date_timepicker_end").val()})},timepicker:!1,onChangeDateTime:function(b,c){a.CurrentStartDate=moment(c.val()).format()}}),$("#date_timepicker_end")[0].value=moment(a.CurrentEndDate).format("MM/DD/YYYY"),$("#date_timepicker_end").datetimepicker({startDate:a.CurrentEndDate,format:"m/d/y",onShow:function(a){this.setOptions({minDate:!!$("#date_timepicker_start").val()&&jQuery("#date_timepicker_start").val()})},timepicker:!1,onChangeDateTime:function(b,c){a.CurrentEndDate=moment(c.val()).add(1,"days").format()}})},SetUp_DateTime_Event_Listeners:function(){a.StatsSerachBtn.addEventListener("click",function(b){b.preventDefault(),a.SetUp_Chart_UI()})},headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},titleOptions:{fontSize:14,fontColor:"black",display:!0},scaleOptions:{yAxes:[{ticks:{beginAtZero:!0,fontSize:14,fontFamily:"'Roboto', sans-serif",fontColor:"black",fontStyle:"500"}}],xAxes:[{ticks:{beginAtZero:!0,stepSize:10,fontSize:14,fontFamily:"'Roboto', sans-serif",fontColor:"black",fontStyle:"500"}}]},scaleOptionsBigCountViews:{yAxes:[{ticks:{beginAtZero:!0,fontSize:14,fontFamily:"'Roboto', sans-serif",fontColor:"black",fontStyle:"500"}}],xAxes:[{ticks:{display:!1}}]},scaleOptionsCountViews:{yAxes:[{ticks:{beginAtZero:!0,fontSize:14,fontFamily:"'Roboto', sans-serif",fontColor:"black",fontStyle:"500"}}],xAxes:[{ticks:{beginAtZero:!0,stepSize:30,fontSize:13,fontFamily:"'Roboto', sans-serif",fontColor:"black",fontStyle:"500",autoSkip:!0,maxRotation:300}}]},SetUp_Refs:function(){a.webSiteId=document.querySelector("script[data-website-id]").getAttribute("data-website-id"),a.PageViewCountChartNode=document.getElementById("bar-chart-PageViewCounts"),a.URLRoutesVisitedChartNode=document.getElementById("bar-chart-InteractionStats"),a.BrowserTypeStatsChartNode=document.getElementById("bar-chart-BrowserStats"),a.SystemStatsChartNode=document.getElementById("bar-chart-SystemStats"),a.ScreenSizeStatsChartNode=document.getElementById("bar-chart-ScreenStats"),a.LocationOfVisitorsStatsChartNode=document.getElementById("bar-chart-LocationStats"),a.InteractionStats_NotFoundText=document.getElementById("InteractionStats-NotFoundText"),a.BrowserStats_NotFoundText=document.getElementById("BrowserStats-NotFoundText"),a.SystemStats_NotFoundText=document.getElementById("SystemStats-NotFoundText"),a.ScreenStats_NotFoundText=document.getElementById("ScreenStats-NotFoundText"),a.LocationStats_NotFoundText=document.getElementById("LocationStats-NotFoundText"),a.Chart_PageViewStats=new Chart(a.PageViewCountChartNode,{type:"line",options:{legend:{display:!1},title:{fontSize:a.titleOptions.fontSize,fontColor:a.titleOptions.fontColor,display:a.titleOptions.display,text:"Page View Counts"},scales:a.scaleOptionsCountViews}}),a.Chart_InteractionStats=new Chart(a.URLRoutesVisitedChartNode,{type:"horizontalBar",options:{legend:{display:!1},title:{fontSize:a.titleOptions.fontSize,fontColor:a.titleOptions.fontColor,display:a.titleOptions.display,text:"Page Interactions"},scales:a.scaleOptions}}),a.Chart_BrowserStats=new Chart(a.BrowserTypeStatsChartNode,{type:"horizontalBar",options:{legend:{display:!1},title:{fontSize:a.titleOptions.fontSize,fontColor:a.titleOptions.fontColor,display:a.titleOptions.display,text:"Browser Types"},scales:a.scaleOptions}}),a.Chart_SystemStats=new Chart(a.SystemStatsChartNode,{type:"horizontalBar",options:{legend:{display:!1},title:{fontSize:a.titleOptions.fontSize,fontColor:a.titleOptions.fontColor,display:a.titleOptions.display,text:"System Types"},scales:a.scaleOptions}}),a.Chart_ScreenSizeStats=new Chart(a.ScreenSizeStatsChartNode,{type:"horizontalBar",options:{legend:{display:!1},title:{fontSize:a.titleOptions.fontSize,fontColor:a.titleOptions.fontColor,display:a.titleOptions.display,text:"Screen Sizes"},scales:a.scaleOptions}}),a.Chart_LocationStats=new Chart(a.LocationOfVisitorsStatsChartNode,{type:"horizontalBar",options:{legend:{display:!1},title:{fontSize:a.titleOptions.fontSize,fontColor:a.titleOptions.fontColor,display:a.titleOptions.display,text:"Screen Sizes"},scales:a.scaleOptions}})},SetUp_ChartHeight:function(){"mobile"===a.GetDeviceType()&&(Chart_InteractionStats.height=80,Chart_BrowserStats.height=40,Chart_SystemStats.height=40,Chart_ScreenSizeStats.height=40,Chart_LocationStats.height=40)},StartUp_View:function(){a.SetUp_Refs(),a.Set_BaseDate(),a.Hid_NotFoundText(),a.SetUp_DateTimePickers(),a.SetUp_DateTime_Event_Listeners(),a.SetUp_Chart_UI(),a.SetUp_ChartHeight()}};a.StartUp_View()});